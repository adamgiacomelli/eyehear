function updateVideoId(){audioElement.pause();var e=document.getElementById("videoIdInput").value;audioElement.src="audio/?videoId="+e,audioElement.play()}function draw(){drawVisual=requestAnimationFrame(draw),analyser.getByteFrequencyData(dataArray),canvasCtx.fillStyle="rgb(100, 100, 100)",canvasCtx.fillRect(0,0,WIDTH,HEIGHT);for(var e,a=WIDTH/bufferLength*2,t=0,n=0;n<bufferLength;n++)e=dataArray[n],canvasCtx.fillStyle="#FFFFA0",canvasCtx.fillRect(t,HEIGHT-e-40,a,e-40),n%10==0&&(canvasCtx.fillStyle="#FFFFFF",canvasCtx.font="13px Courier New",canvasCtx.fillText(e.toFixed(1),t,HEIGHT),canvasCtx.fillText((n*hzMultiplier).toFixed(1)+"Hz",t,HEIGHT-20)),t+=a+1}var audioCtx=new(window.AudioContext||window.webkitAudioContext),analyser=audioCtx.createAnalyser();analyser.fftSize=1024;var bufferLength=analyser.frequencyBinCount,dataArray=new Uint8Array(bufferLength),hzMultiplier=audioCtx.sampleRate/analyser.fftSize;analyser.getByteTimeDomainData(dataArray);var canvas=document.getElementById("oscilloscope"),canvasCtx=canvas.getContext("2d"),WIDTH=canvas.width,HEIGHT=canvas.height,audioElement=document.getElementById("player"),source=audioCtx.createMediaElementSource(audioElement);audioElement.addEventListener("canplay",function(){source.connect(analyser),analyser.connect(audioCtx.destination),draw()});